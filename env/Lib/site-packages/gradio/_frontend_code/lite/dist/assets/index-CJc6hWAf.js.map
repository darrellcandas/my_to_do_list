{"version":3,"mappings":"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","names":["e","t","i","s","r","n","o","d","a","ctx","t_value","insert","target","option","anchor","dirty","set_data","option_value_value","create_if_block","select","i18n","$$props","micDevices","dispatch","createEventDispatcher","tempDevices","RecordPlugin","devices","$$invalidate","device","err","time","t0_value","t2_value","t4_value","t7_value","if_block","attr","button1","button1_class_value","div1","append","div0","button0","button2","button3","button4","current","t0","t2","t4","t7","record","recording","recordButton","pauseButton","resumeButton","stopButton","stopButtonPaused","recording_ongoing","record_time","show_recording_waveform","timing","$$value","click_handler","click_handler_3","click_handler_4","if_block0","create_if_block_4","create_if_block_3","format_time","waveformrecordcontrols_changes","create_if_block_2","if_block1","create_if_block_1","if_block2","div2","mode","dispatch_blob","waveform_settings","waveform_options","handle_reset_value","editable","micWaveform","recordingWaveform","playing","recordingContainer","microphoneContainer","recordedAudio","timeRef","durationRef","audio_duration","seconds","interval","trimDuration","start_interval","record_start_callback","waveformCanvas","record_end_callback","blob","array_buffer","audio_buffer","process_audio","audio","create_mic_waveform","WaveSurfer","microphone","recording2","create_recording_waveform","handle_trim_audio","start","end","decodedData","trimmedAudio","onMount","skip_audio","value","duration","currentTime","div","t1_value","button","span1","t1","span2","paused_recording","stop","waiting","waveformRecord","streamaudio_changes","Music","blocklabel_changes","NUM_HEADER_BYTES","label","root","loop","show_label","show_download_button","sources","pending","streaming","trim_region_settings","dragging","active_source","max_file_size","upload","stream_handler","stream_every","uploading","time_limit","stream_state","modify_stream","state","set_time_limit","recorder","header","pending_stream","submit_pending_stream_on_pending_end","inited","audio_chunks","module_promises","get_modules","blobs","event","_audio_blob","val","prepare_files","onDestroy","prepare_audio","stream","MediaRecorder2","register","connect","handle_chunk","buffer","payload","blobParts","clear","handle_load","detail","error_handler","edit_handler_1","block_changes","uploadtext_changes","interactiveaudio_changes","staticaudio_changes","value_is_output","elem_id","elem_classes","visible","interactive","container","scale","min_width","loading_status","autoplay","show_share_button","input_ready","_modify_stream","modify_stream_state","get_stream_state","gradio","old_value","initial_value","color_accent","set_trim_region_colour","handle_error","level","status","afterUpdate","clear_status_handler","clear_status_handler_1","func","args","func_1","stop_recording_handler","close_stream_handler"],"ignoreList":[0],"sources":["../../../../node_modules/.pnpm/wavesurfer.js@7.4.2/node_modules/wavesurfer.js/dist/plugins/record.js","../../../audio/dist/shared/DeviceSelect.svelte","../../../audio/dist/shared/WaveformRecordControls.svelte","../../../audio/dist/recorder/AudioRecorder.svelte","../../../audio/dist/streaming/StreamAudio.svelte","../../../audio/dist/interactive/InteractiveAudio.svelte","../../../audio/dist/Index.svelte"],"sourcesContent":["function e(e,t,i,s){return new(i||(i=Promise))((function(r,n){function o(e){try{d(s.next(e))}catch(e){n(e)}}function a(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}d((s=s.apply(e,t||[])).next())}))}\"function\"==typeof SuppressedError&&SuppressedError;class t{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,i){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),null==i?void 0:i.once){const i=()=>{this.removeEventListener(e,i),this.removeEventListener(e,t)};return this.addEventListener(e,i),i}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var i;null===(i=this.listeners[e])||void 0===i||i.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((e=>e(...t)))}}class i extends t{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit(\"destroy\"),this.subscriptions.forEach((e=>e()))}}const s=[\"audio/webm\",\"audio/wav\",\"audio/mpeg\",\"audio/mp4\",\"audio/mp3\"];class r extends i{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:null!==(t=e.audioBitsPerSecond)&&void 0!==t?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new r(e||{})}renderMicStream(e){const t=new AudioContext,i=t.createMediaStreamSource(e),s=t.createAnalyser();i.connect(s);const r=s.frequencyBinCount,n=new Float32Array(r),o=r/t.sampleRate;let a;const d=()=>{s.getFloatTimeDomainData(n),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load(\"\",[n],o)),a=requestAnimationFrame(d)};return d(),()=>{cancelAnimationFrame(a),null==i||i.disconnect(),null==t||t.close()}}startMic(t){return e(this,void 0,void 0,(function*(){let e;try{e=yield navigator.mediaDevices.getUserMedia({audio:!(null==t?void 0:t.deviceId)||{deviceId:t.deviceId}})}catch(e){throw new Error(\"Error accessing the microphone: \"+e.message)}const i=this.renderMicStream(e);return this.subscriptions.push(this.once(\"destroy\",i)),this.stream=e,e}))}stopMic(){this.stream&&(this.stream.getTracks().forEach((e=>e.stop())),this.stream=null,this.mediaRecorder=null)}startRecording(t){return e(this,void 0,void 0,(function*(){const e=this.stream||(yield this.startMic(t)),i=this.mediaRecorder||new MediaRecorder(e,{mimeType:this.options.mimeType||s.find((e=>MediaRecorder.isTypeSupported(e))),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=i,this.stopRecording();const r=[];i.ondataavailable=e=>{e.data.size>0&&r.push(e.data)},i.onstop=()=>{var e;const t=new Blob(r,{type:i.mimeType});this.emit(\"record-end\",t),!1!==this.options.renderRecordedAudio&&(null===(e=this.wavesurfer)||void 0===e||e.load(URL.createObjectURL(t)))},i.start(),this.emit(\"record-start\")}))}isRecording(){var e;return\"recording\"===(null===(e=this.mediaRecorder)||void 0===e?void 0:e.state)}isPaused(){var e;return\"paused\"===(null===(e=this.mediaRecorder)||void 0===e?void 0:e.state)}stopRecording(){var e;this.isRecording()&&(null===(e=this.mediaRecorder)||void 0===e||e.stop())}pauseRecording(){var e;this.isRecording()&&(null===(e=this.mediaRecorder)||void 0===e||e.pause(),this.emit(\"record-pause\"))}resumeRecording(){var e;this.isPaused()&&(null===(e=this.mediaRecorder)||void 0===e||e.resume(),this.emit(\"record-resume\"))}static getAvailableAudioDevices(){return e(this,void 0,void 0,(function*(){return navigator.mediaDevices.enumerateDevices().then((e=>e.filter((e=>\"audioinput\"===e.kind))))}))}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}export{r as default};\n","<script>import RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\nimport { createEventDispatcher } from \"svelte\";\nexport let i18n;\nexport let micDevices = [];\nconst dispatch = createEventDispatcher();\n$:\n  if (typeof window !== \"undefined\") {\n    try {\n      let tempDevices = [];\n      RecordPlugin.getAvailableAudioDevices().then(\n        (devices) => {\n          micDevices = devices;\n          devices.forEach((device) => {\n            if (device.deviceId) {\n              tempDevices.push(device);\n            }\n          });\n          micDevices = tempDevices;\n        }\n      );\n    } catch (err) {\n      if (err instanceof DOMException && err.name == \"NotAllowedError\") {\n        dispatch(\"error\", i18n(\"audio.allow_recording_access\"));\n      }\n      throw err;\n    }\n  }\n</script>\n\n<select\n\tclass=\"mic-select\"\n\taria-label=\"Select input device\"\n\tdisabled={micDevices.length === 0}\n>\n\t{#if micDevices.length === 0}\n\t\t<option value=\"\">{i18n(\"audio.no_microphone\")}</option>\n\t{:else}\n\t\t{#each micDevices as micDevice}\n\t\t\t<option value={micDevice.deviceId}>{micDevice.label}</option>\n\t\t{/each}\n\t{/if}\n</select>\n\n<style>\n\t.mic-select {\n\t\theight: var(--size-8);\n\t\tbackground: var(--block-background-fill);\n\t\tpadding: 0px var(--spacing-xxl);\n\t\tborder-radius: var(--button-large-radius);\n\t\tfont-size: var(--text-md);\n\t\tborder: 1px solid var(--block-border-color);\n\t\tgap: var(--size-1);\n\t}\n\n\tselect {\n\t\ttext-overflow: ellipsis;\n\t\tmax-width: var(--size-40);\n\t}\n\n\t@media (max-width: 375px) {\n\t\tselect {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n</style>\n","<script>import { Pause } from \"@gradio/icons\";\nimport RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\nimport DeviceSelect from \"./DeviceSelect.svelte\";\nexport let record;\nexport let i18n;\nexport let recording = false;\nlet micDevices = [];\nlet recordButton;\nlet pauseButton;\nlet resumeButton;\nlet stopButton;\nlet stopButtonPaused;\nlet recording_ongoing = false;\nexport let record_time;\nexport let show_recording_waveform;\nexport let timing = false;\n$:\n  record.on(\"record-start\", () => {\n    record.startMic();\n    recordButton.style.display = \"none\";\n    stopButton.style.display = \"flex\";\n    pauseButton.style.display = \"block\";\n  });\n$:\n  record.on(\"record-end\", () => {\n    if (record.isPaused()) {\n      record.resumeRecording();\n      record.stopRecording();\n    }\n    record.stopMic();\n    recordButton.style.display = \"flex\";\n    stopButton.style.display = \"none\";\n    pauseButton.style.display = \"none\";\n    recordButton.disabled = false;\n  });\n$:\n  record.on(\"record-pause\", () => {\n    pauseButton.style.display = \"none\";\n    resumeButton.style.display = \"block\";\n    stopButton.style.display = \"none\";\n    stopButtonPaused.style.display = \"flex\";\n  });\n$:\n  record.on(\"record-resume\", () => {\n    pauseButton.style.display = \"block\";\n    resumeButton.style.display = \"none\";\n    recordButton.style.display = \"none\";\n    stopButton.style.display = \"flex\";\n    stopButtonPaused.style.display = \"none\";\n  });\n$:\n  if (recording && !recording_ongoing) {\n    record.startRecording();\n    recording_ongoing = true;\n  } else {\n    record.stopRecording();\n    recording_ongoing = false;\n  }\n</script>\n\n<div class=\"controls\">\n\t<div class=\"wrapper\">\n\t\t<button\n\t\t\tbind:this={recordButton}\n\t\t\tclass=\"record record-button\"\n\t\t\ton:click={() => record.startRecording()}>{i18n(\"audio.record\")}</button\n\t\t>\n\n\t\t<button\n\t\t\tbind:this={stopButton}\n\t\t\tclass=\"stop-button {record.isPaused() ? 'stop-button-paused' : ''}\"\n\t\t\ton:click={() => {\n\t\t\t\tif (record.isPaused()) {\n\t\t\t\t\trecord.resumeRecording();\n\t\t\t\t\trecord.stopRecording();\n\t\t\t\t}\n\n\t\t\t\trecord.stopRecording();\n\t\t\t}}>{i18n(\"audio.stop\")}</button\n\t\t>\n\n\t\t<button\n\t\t\tbind:this={stopButtonPaused}\n\t\t\tid=\"stop-paused\"\n\t\t\tclass=\"stop-button-paused\"\n\t\t\ton:click={() => {\n\t\t\t\tif (record.isPaused()) {\n\t\t\t\t\trecord.resumeRecording();\n\t\t\t\t\trecord.stopRecording();\n\t\t\t\t}\n\n\t\t\t\trecord.stopRecording();\n\t\t\t}}>{i18n(\"audio.stop\")}</button\n\t\t>\n\n\t\t<button\n\t\t\taria-label=\"pause\"\n\t\t\tbind:this={pauseButton}\n\t\t\tclass=\"pause-button\"\n\t\t\ton:click={() => record.pauseRecording()}><Pause /></button\n\t\t>\n\t\t<button\n\t\t\tbind:this={resumeButton}\n\t\t\tclass=\"resume-button\"\n\t\t\ton:click={() => record.resumeRecording()}>{i18n(\"audio.resume\")}</button\n\t\t>\n\t\t{#if timing && !show_recording_waveform}\n\t\t\t<time class=\"duration-button duration\">{record_time}</time>\n\t\t{/if}\n\t</div>\n\t<DeviceSelect bind:micDevices {i18n} />\n</div>\n\n<style>\n\t.controls {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.wrapper {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.record {\n\t\tmargin-right: var(--spacing-md);\n\t}\n\n\t.stop-button-paused {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--button-large-radius);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--block-border-color);\n\t\tmargin: var(--size-1) var(--size-1) 0 0;\n\t}\n\n\t.stop-button-paused::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\t.stop-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t\tanimation: scaling 1800ms infinite;\n\t}\n\n\t.stop-button {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--button-large-radius);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--primary-600);\n\t\tmargin: var(--size-1) var(--size-1) 0 0;\n\t}\n\n\t.record-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\n\t.record-button {\n\t\theight: var(--size-8);\n\t\twidth: var(--size-24);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--button-large-radius);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tborder: 1px solid var(--block-border-color);\n\t}\n\n\t.stop-button:disabled {\n\t\tcursor: not-allowed;\n\t}\n\n\t.record-button:disabled {\n\t\tcursor: not-allowed;\n\t\topacity: 0.5;\n\t}\n\n\t@keyframes scaling {\n\t\t0% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1;\n\t\t}\n\t\t50% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1.2;\n\t\t}\n\t\t100% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1;\n\t\t}\n\t}\n\n\t.pause-button {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tborder: 1px solid var(--block-border-color);\n\t\tborder-radius: var(--button-large-radius);\n\t\tpadding: var(--spacing-md);\n\t\tmargin: var(--size-1) var(--size-1) 0 0;\n\t}\n\n\t.resume-button {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tborder: 1px solid var(--block-border-color);\n\t\tborder-radius: var(--button-large-radius);\n\t\tpadding: var(--spacing-xl);\n\t\tline-height: 1px;\n\t\tfont-size: var(--text-md);\n\t\tmargin: var(--size-1) var(--size-1) 0 0;\n\t}\n\n\t.duration {\n\t\tdisplay: flex;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tborder: 1px solid var(--block-border-color);\n\t\tpadding: var(--spacing-md);\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tmargin: var(--size-1) var(--size-1) 0 0;\n\t}\n\n\t:global(::part(region)) {\n\t\tborder-radius: var(--radius-md);\n\t\theight: 98% !important;\n\t\tborder: 1px solid var(--trim-region-color);\n\t\tbackground-color: unset;\n\t\tborder-width: 1px 3px;\n\t}\n\n\t:global(::part(region))::after {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: var(--trim-region-color);\n\t\topacity: 0.2;\n\t\tborder-radius: var(--radius-md);\n\t}\n\n\t:global(::part(region-handle)) {\n\t\twidth: 5px !important;\n\t\tborder: none;\n\t}\n</style>\n","<script>import { onMount } from \"svelte\";\nimport { createEventDispatcher } from \"svelte\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport { skip_audio, process_audio } from \"../shared/utils\";\nimport WSRecord from \"wavesurfer.js/dist/plugins/record.js\";\nimport WaveformControls from \"../shared/WaveformControls.svelte\";\nimport WaveformRecordControls from \"../shared/WaveformRecordControls.svelte\";\nimport RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\nimport { format_time } from \"@gradio/utils\";\nexport let mode;\nexport let i18n;\nexport let dispatch_blob;\nexport let waveform_settings;\nexport let waveform_options = {\n  show_recording_waveform: true\n};\nexport let handle_reset_value;\nexport let editable = true;\nexport let recording = false;\nlet micWaveform;\nlet recordingWaveform;\nlet playing = false;\nlet recordingContainer;\nlet microphoneContainer;\nlet record;\nlet recordedAudio = null;\nlet timeRef;\nlet durationRef;\nlet audio_duration;\nlet seconds = 0;\nlet interval;\nlet timing = false;\nlet trimDuration = 0;\nconst start_interval = () => {\n  clearInterval(interval);\n  interval = setInterval(() => {\n    seconds++;\n  }, 1e3);\n};\nconst dispatch = createEventDispatcher();\nfunction record_start_callback() {\n  start_interval();\n  timing = true;\n  dispatch(\"start_recording\");\n  if (waveform_options.show_recording_waveform) {\n    let waveformCanvas = microphoneContainer;\n    if (waveformCanvas)\n      waveformCanvas.style.display = \"block\";\n  }\n}\nasync function record_end_callback(blob) {\n  seconds = 0;\n  timing = false;\n  clearInterval(interval);\n  try {\n    const array_buffer = await blob.arrayBuffer();\n    const context = new AudioContext({\n      sampleRate: waveform_settings.sampleRate\n    });\n    const audio_buffer = await context.decodeAudioData(array_buffer);\n    if (audio_buffer)\n      await process_audio(audio_buffer).then(async (audio) => {\n        await dispatch_blob([audio], \"change\");\n        await dispatch_blob([audio], \"stop_recording\");\n      });\n  } catch (e) {\n    console.error(e);\n  }\n}\n$:\n  record?.on(\"record-resume\", () => {\n    start_interval();\n  });\n$:\n  recordingWaveform?.on(\"decode\", (duration) => {\n    audio_duration = duration;\n    durationRef && (durationRef.textContent = format_time(duration));\n  });\n$:\n  recordingWaveform?.on(\n    \"timeupdate\",\n    (currentTime) => timeRef && (timeRef.textContent = format_time(currentTime))\n  );\n$:\n  recordingWaveform?.on(\"pause\", () => {\n    dispatch(\"pause\");\n    playing = false;\n  });\n$:\n  recordingWaveform?.on(\"play\", () => {\n    dispatch(\"play\");\n    playing = true;\n  });\n$:\n  recordingWaveform?.on(\"finish\", () => {\n    dispatch(\"stop\");\n    playing = false;\n  });\nconst create_mic_waveform = () => {\n  if (microphoneContainer)\n    microphoneContainer.innerHTML = \"\";\n  if (micWaveform !== void 0)\n    micWaveform.destroy();\n  if (!microphoneContainer)\n    return;\n  micWaveform = WaveSurfer.create({\n    ...waveform_settings,\n    normalize: false,\n    container: microphoneContainer\n  });\n  record = micWaveform.registerPlugin(RecordPlugin.create());\n  record.startMic();\n  record?.on(\"record-end\", record_end_callback);\n  record?.on(\"record-start\", record_start_callback);\n  record?.on(\"record-pause\", () => {\n    dispatch(\"pause_recording\");\n    clearInterval(interval);\n  });\n  record?.on(\"record-end\", (blob) => {\n    recordedAudio = URL.createObjectURL(blob);\n    const microphone = microphoneContainer;\n    const recording2 = recordingContainer;\n    if (microphone)\n      microphone.style.display = \"none\";\n    if (recording2 && recordedAudio) {\n      recording2.innerHTML = \"\";\n      create_recording_waveform();\n    }\n  });\n};\nconst create_recording_waveform = () => {\n  let recording2 = recordingContainer;\n  if (!recordedAudio || !recording2)\n    return;\n  recordingWaveform = WaveSurfer.create({\n    container: recording2,\n    url: recordedAudio,\n    ...waveform_settings\n  });\n};\nconst handle_trim_audio = async (start, end) => {\n  mode = \"edit\";\n  const decodedData = recordingWaveform.getDecodedData();\n  if (decodedData)\n    await process_audio(decodedData, start, end).then(\n      async (trimmedAudio) => {\n        await dispatch_blob([trimmedAudio], \"change\");\n        await dispatch_blob([trimmedAudio], \"stop_recording\");\n        recordingWaveform.destroy();\n        create_recording_waveform();\n      }\n    );\n  dispatch(\"edit\");\n};\nonMount(() => {\n  create_mic_waveform();\n  window.addEventListener(\"keydown\", (e) => {\n    if (e.key === \"ArrowRight\") {\n      skip_audio(recordingWaveform, 0.1);\n    } else if (e.key === \"ArrowLeft\") {\n      skip_audio(recordingWaveform, -0.1);\n    }\n  });\n});\n</script>\n\n<div class=\"component-wrapper\">\n\t<div\n\t\tclass=\"microphone\"\n\t\tbind:this={microphoneContainer}\n\t\tdata-testid=\"microphone-waveform\"\n\t/>\n\t<div bind:this={recordingContainer} data-testid=\"recording-waveform\" />\n\n\t{#if (timing || recordedAudio) && waveform_options.show_recording_waveform}\n\t\t<div class=\"timestamps\">\n\t\t\t<time bind:this={timeRef} class=\"time\">0:00</time>\n\t\t\t<div>\n\t\t\t\t{#if mode === \"edit\" && trimDuration > 0}\n\t\t\t\t\t<time class=\"trim-duration\">{format_time(trimDuration)}</time>\n\t\t\t\t{/if}\n\t\t\t\t{#if timing}\n\t\t\t\t\t<time class=\"duration\">{format_time(seconds)}</time>\n\t\t\t\t{:else}\n\t\t\t\t\t<time bind:this={durationRef} class=\"duration\">0:00</time>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t{/if}\n\n\t{#if microphoneContainer && !recordedAudio}\n\t\t<WaveformRecordControls\n\t\t\tbind:record\n\t\t\t{i18n}\n\t\t\t{timing}\n\t\t\t{recording}\n\t\t\tshow_recording_waveform={waveform_options.show_recording_waveform}\n\t\t\trecord_time={format_time(seconds)}\n\t\t/>\n\t{/if}\n\n\t{#if recordingWaveform && recordedAudio}\n\t\t<WaveformControls\n\t\t\tbind:waveform={recordingWaveform}\n\t\t\tcontainer={recordingContainer}\n\t\t\t{playing}\n\t\t\t{audio_duration}\n\t\t\t{i18n}\n\t\t\t{editable}\n\t\t\tinteractive={true}\n\t\t\t{handle_trim_audio}\n\t\t\tbind:trimDuration\n\t\t\tbind:mode\n\t\t\tshow_redo\n\t\t\t{handle_reset_value}\n\t\t\t{waveform_options}\n\t\t/>\n\t{/if}\n</div>\n\n<style>\n\t.microphone {\n\t\twidth: 100%;\n\t\tdisplay: none;\n\t}\n\n\t.component-wrapper {\n\t\tpadding: var(--size-3);\n\t\twidth: 100%;\n\t}\n\n\t.timestamps {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\twidth: 100%;\n\t\tpadding: var(--size-1) 0;\n\t\tmargin: var(--spacing-md) 0;\n\t}\n\n\t.time {\n\t\tcolor: var(--neutral-400);\n\t}\n\n\t.duration {\n\t\tcolor: var(--neutral-400);\n\t}\n\n\t.trim-duration {\n\t\tcolor: var(--color-accent);\n\t\tmargin-right: var(--spacing-sm);\n\t}\n</style>\n","<script>import { onMount } from \"svelte\";\nimport { Spinner } from \"@gradio/icons\";\nimport WaveSurfer from \"wavesurfer.js\";\nimport RecordPlugin from \"wavesurfer.js/dist/plugins/record.js\";\nimport DeviceSelect from \"../shared/DeviceSelect.svelte\";\nexport let recording = false;\nexport let paused_recording = false;\nexport let stop;\nexport let record;\nexport let i18n;\nexport let waveform_settings;\nexport let waveform_options = {\n  show_recording_waveform: true\n};\nexport let waiting = false;\nlet micWaveform;\nlet waveformRecord;\nlet microphoneContainer;\nlet micDevices = [];\nonMount(() => {\n  create_mic_waveform();\n});\nconst create_mic_waveform = () => {\n  if (micWaveform !== void 0)\n    micWaveform.destroy();\n  if (!microphoneContainer)\n    return;\n  micWaveform = WaveSurfer.create({\n    ...waveform_settings,\n    height: 100,\n    container: microphoneContainer\n  });\n  waveformRecord = micWaveform.registerPlugin(RecordPlugin.create());\n};\n</script>\n\n<div class=\"mic-wrap\">\n\t{#if waveform_options.show_recording_waveform}\n\t\t<div\n\t\t\tbind:this={microphoneContainer}\n\t\t\tstyle:display={recording ? \"block\" : \"none\"}\n\t\t/>\n\t{/if}\n\t<div class=\"controls\">\n\t\t{#if recording && !waiting}\n\t\t\t<button\n\t\t\t\tclass={paused_recording ? \"stop-button-paused\" : \"stop-button\"}\n\t\t\t\ton:click={() => {\n\t\t\t\t\twaveformRecord?.stopMic();\n\t\t\t\t\tstop();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span class=\"record-icon\">\n\t\t\t\t\t<span class=\"pinger\" />\n\t\t\t\t\t<span class=\"dot\" />\n\t\t\t\t</span>\n\t\t\t\t{paused_recording ? i18n(\"audio.pause\") : i18n(\"audio.stop\")}\n\t\t\t</button>\n\t\t{:else if recording && waiting}\n\t\t\t<button\n\t\t\t\tclass=\"spinner-button\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tstop();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div class=\"icon\">\n\t\t\t\t\t<Spinner />\n\t\t\t\t</div>\n\t\t\t\t{i18n(\"audio.waiting\")}\n\t\t\t</button>\n\t\t{:else}\n\t\t\t<button\n\t\t\t\tclass=\"record-button\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\twaveformRecord?.startMic();\n\t\t\t\t\trecord();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span class=\"record-icon\">\n\t\t\t\t\t<span class=\"dot\" />\n\t\t\t\t</span>\n\t\t\t\t{i18n(\"audio.record\")}\n\t\t\t</button>\n\t\t{/if}\n\n\t\t<DeviceSelect bind:micDevices {i18n} />\n\t</div>\n</div>\n\n<style>\n\t.controls {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tflex-wrap: wrap;\n\t}\n\n\t.mic-wrap {\n\t\tdisplay: block;\n\t\talign-items: center;\n\t\tmargin: var(--spacing-xl);\n\t}\n\n\t.icon {\n\t\twidth: var(--size-4);\n\t\theight: var(--size-4);\n\t\tfill: var(--primary-600);\n\t\tstroke: var(--primary-600);\n\t}\n\n\t.stop-button-paused {\n\t\tdisplay: none;\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--button-large-radius);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--block-border-color);\n\t\tmargin-right: 5px;\n\t}\n\n\t.stop-button-paused::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\n\t.stop-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t\tanimation: scaling 1800ms infinite;\n\t}\n\n\t.stop-button {\n\t\theight: var(--size-8);\n\t\twidth: var(--size-20);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--button-large-radius);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--primary-600);\n\t\tmargin-right: 5px;\n\t\tdisplay: flex;\n\t}\n\n\t.spinner-button {\n\t\theight: var(--size-8);\n\t\twidth: var(--size-24);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--radius-3xl);\n\t\talign-items: center;\n\t\tborder: 1px solid var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t\tdisplay: flex;\n\t\tjustify-content: space-evenly;\n\t}\n\n\t.record-button::before {\n\t\tcontent: \"\";\n\t\theight: var(--size-4);\n\t\twidth: var(--size-4);\n\t\tborder-radius: var(--radius-full);\n\t\tbackground: var(--primary-600);\n\t\tmargin: 0 var(--spacing-xl);\n\t}\n\n\t.record-button {\n\t\theight: var(--size-8);\n\t\twidth: var(--size-24);\n\t\tbackground-color: var(--block-background-fill);\n\t\tborder-radius: var(--button-large-radius);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tborder: 1px solid var(--block-border-color);\n\t}\n\n\t@keyframes scaling {\n\t\t0% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1;\n\t\t}\n\t\t50% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1.2;\n\t\t}\n\t\t100% {\n\t\t\tbackground-color: var(--primary-600);\n\t\t\tscale: 1;\n\t\t}\n\t}\n</style>\n","<script>import { onDestroy, createEventDispatcher, tick } from \"svelte\";\nimport { Upload, ModifyUpload } from \"@gradio/upload\";\nimport { prepare_files } from \"@gradio/client\";\nimport { BlockLabel } from \"@gradio/atoms\";\nimport { Music } from \"@gradio/icons\";\nimport { StreamingBar } from \"@gradio/statustracker\";\nimport AudioPlayer from \"../player/AudioPlayer.svelte\";\nimport AudioRecorder from \"../recorder/AudioRecorder.svelte\";\nimport StreamAudio from \"../streaming/StreamAudio.svelte\";\nimport { SelectSource } from \"@gradio/atoms\";\nexport let value = null;\nexport let label;\nexport let root;\nexport let loop;\nexport let show_label = true;\nexport let show_download_button = false;\nexport let sources = [\"microphone\", \"upload\"];\nexport let pending = false;\nexport let streaming = false;\nexport let i18n;\nexport let waveform_settings;\nexport let trim_region_settings = {};\nexport let waveform_options = {};\nexport let dragging;\nexport let active_source;\nexport let handle_reset_value = () => {\n};\nexport let editable = true;\nexport let max_file_size = null;\nexport let upload;\nexport let stream_handler;\nexport let stream_every;\nexport let uploading = false;\nexport let recording = false;\nlet time_limit = null;\nlet stream_state = \"closed\";\nexport const modify_stream = (state) => {\n  if (state === \"closed\") {\n    time_limit = null;\n    stream_state = \"closed\";\n  } else if (state === \"waiting\") {\n    stream_state = \"waiting\";\n  } else {\n    stream_state = \"open\";\n  }\n};\nexport const set_time_limit = (time) => {\n  if (recording)\n    time_limit = time;\n};\n$:\n  dispatch(\"drag\", dragging);\nlet recorder;\nlet mode = \"\";\nlet header = void 0;\nlet pending_stream = [];\nlet submit_pending_stream_on_pending_end = false;\nlet inited = false;\nconst NUM_HEADER_BYTES = 44;\nlet audio_chunks = [];\nlet module_promises;\nfunction get_modules() {\n  module_promises = [\n    import(\"extendable-media-recorder\"),\n    import(\"extendable-media-recorder-wav-encoder\")\n  ];\n}\nconst is_browser = typeof window !== \"undefined\";\nif (is_browser && streaming) {\n  get_modules();\n}\nconst dispatch = createEventDispatcher();\nconst dispatch_blob = async (blobs, event) => {\n  let _audio_blob = new File(blobs, \"audio.wav\");\n  const val = await prepare_files([_audio_blob], event === \"stream\");\n  value = ((await upload(val, root, void 0, max_file_size || void 0))?.filter(\n    Boolean\n  ))[0];\n  dispatch(event, value);\n};\nonDestroy(() => {\n  if (streaming && recorder && recorder.state !== \"inactive\") {\n    recorder.stop();\n  }\n});\nasync function prepare_audio() {\n  let stream;\n  try {\n    stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n  } catch (err) {\n    if (!navigator.mediaDevices) {\n      dispatch(\"error\", i18n(\"audio.no_device_support\"));\n      return;\n    }\n    if (err instanceof DOMException && err.name == \"NotAllowedError\") {\n      dispatch(\"error\", i18n(\"audio.allow_recording_access\"));\n      return;\n    }\n    throw err;\n  }\n  if (stream == null)\n    return;\n  if (streaming) {\n    const [{ MediaRecorder: MediaRecorder2, register }, { connect }] = await Promise.all(module_promises);\n    await register(await connect());\n    recorder = new MediaRecorder2(stream, { mimeType: \"audio/wav\" });\n    recorder.addEventListener(\"dataavailable\", handle_chunk);\n  } else {\n    recorder = new MediaRecorder(stream);\n    recorder.addEventListener(\"dataavailable\", (event) => {\n      audio_chunks.push(event.data);\n    });\n  }\n  recorder.addEventListener(\"stop\", async () => {\n    recording = false;\n    await dispatch_blob(audio_chunks, \"change\");\n    await dispatch_blob(audio_chunks, \"stop_recording\");\n    audio_chunks = [];\n  });\n  inited = true;\n}\nasync function handle_chunk(event) {\n  let buffer = await event.data.arrayBuffer();\n  let payload = new Uint8Array(buffer);\n  if (!header) {\n    header = new Uint8Array(buffer.slice(0, NUM_HEADER_BYTES));\n    payload = new Uint8Array(buffer.slice(NUM_HEADER_BYTES));\n  }\n  if (pending) {\n    pending_stream.push(payload);\n  } else {\n    let blobParts = [header].concat(pending_stream, [payload]);\n    if (!recording || stream_state === \"waiting\")\n      return;\n    dispatch_blob(blobParts, \"stream\");\n    pending_stream = [];\n  }\n}\n$:\n  if (submit_pending_stream_on_pending_end && pending === false) {\n    submit_pending_stream_on_pending_end = false;\n    if (header && pending_stream) {\n      let blobParts = [header].concat(pending_stream);\n      pending_stream = [];\n      dispatch_blob(blobParts, \"stream\");\n    }\n  }\nasync function record() {\n  recording = true;\n  dispatch(\"start_recording\");\n  if (!inited)\n    await prepare_audio();\n  header = void 0;\n  if (streaming) {\n    recorder.start(stream_every * 1e3);\n  }\n}\nfunction clear() {\n  dispatch(\"change\", null);\n  dispatch(\"clear\");\n  mode = \"\";\n  value = null;\n}\nfunction handle_load({ detail }) {\n  value = detail;\n  dispatch(\"change\", detail);\n  dispatch(\"upload\", detail);\n}\nasync function stop() {\n  recording = false;\n  if (streaming) {\n    dispatch(\"close_stream\");\n    dispatch(\"stop_recording\");\n    recorder.stop();\n    if (pending) {\n      submit_pending_stream_on_pending_end = true;\n    }\n    dispatch_blob(audio_chunks, \"stop_recording\");\n    dispatch(\"clear\");\n    mode = \"\";\n  }\n}\n$:\n  if (!recording && recorder)\n    stop();\n$:\n  if (recording && recorder)\n    record();\n</script>\n\n<BlockLabel\n\t{show_label}\n\tIcon={Music}\n\tfloat={active_source === \"upload\" && value === null}\n\tlabel={label || i18n(\"audio.audio\")}\n/>\n<div class=\"audio-container\">\n\t<StreamingBar {time_limit} />\n\t{#if value === null || streaming}\n\t\t{#if active_source === \"microphone\"}\n\t\t\t<ModifyUpload {i18n} on:clear={clear} />\n\t\t\t{#if streaming}\n\t\t\t\t<StreamAudio\n\t\t\t\t\t{record}\n\t\t\t\t\t{recording}\n\t\t\t\t\t{stop}\n\t\t\t\t\t{i18n}\n\t\t\t\t\t{waveform_settings}\n\t\t\t\t\t{waveform_options}\n\t\t\t\t\twaiting={stream_state === \"waiting\"}\n\t\t\t\t/>\n\t\t\t{:else}\n\t\t\t\t<AudioRecorder\n\t\t\t\t\tbind:mode\n\t\t\t\t\t{i18n}\n\t\t\t\t\t{editable}\n\t\t\t\t\t{recording}\n\t\t\t\t\t{dispatch_blob}\n\t\t\t\t\t{waveform_settings}\n\t\t\t\t\t{waveform_options}\n\t\t\t\t\t{handle_reset_value}\n\t\t\t\t\ton:start_recording\n\t\t\t\t\ton:pause_recording\n\t\t\t\t\ton:stop_recording\n\t\t\t\t/>\n\t\t\t{/if}\n\t\t{:else if active_source === \"upload\"}\n\t\t\t<!-- explicitly listed out audio mimetypes due to iOS bug not recognizing audio/* -->\n\t\t\t<Upload\n\t\t\t\tfiletype=\"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*\"\n\t\t\t\ton:load={handle_load}\n\t\t\t\tbind:dragging\n\t\t\t\tbind:uploading\n\t\t\t\ton:error={({ detail }) => dispatch(\"error\", detail)}\n\t\t\t\t{root}\n\t\t\t\t{max_file_size}\n\t\t\t\t{upload}\n\t\t\t\t{stream_handler}\n\t\t\t>\n\t\t\t\t<slot />\n\t\t\t</Upload>\n\t\t{/if}\n\t{:else}\n\t\t<ModifyUpload\n\t\t\t{i18n}\n\t\t\ton:clear={clear}\n\t\t\ton:edit={() => (mode = \"edit\")}\n\t\t\tdownload={show_download_button ? value.url : null}\n\t\t/>\n\n\t\t<AudioPlayer\n\t\t\tbind:mode\n\t\t\t{value}\n\t\t\t{label}\n\t\t\t{i18n}\n\t\t\t{dispatch_blob}\n\t\t\t{waveform_settings}\n\t\t\t{waveform_options}\n\t\t\t{trim_region_settings}\n\t\t\t{handle_reset_value}\n\t\t\t{editable}\n\t\t\t{loop}\n\t\t\tinteractive\n\t\t\ton:stop\n\t\t\ton:play\n\t\t\ton:pause\n\t\t\ton:edit\n\t\t/>\n\t{/if}\n\t<SelectSource {sources} bind:active_source handle_clear={clear} />\n</div>\n\n<style>\n\t.audio-container {\n\t\theight: calc(var(--size-full) - var(--size-6));\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t}\n</style>\n","<svelte:options accessors={true} />\n\n<script>import { afterUpdate, onMount } from \"svelte\";\nimport StaticAudio from \"./static/StaticAudio.svelte\";\nimport InteractiveAudio from \"./interactive/InteractiveAudio.svelte\";\nimport { StatusTracker } from \"@gradio/statustracker\";\nimport { Block, UploadText } from \"@gradio/atoms\";\nexport let value_is_output = false;\nexport let elem_id = \"\";\nexport let elem_classes = [];\nexport let visible = true;\nexport let interactive;\nexport let value = null;\nexport let sources;\nexport let label;\nexport let root;\nexport let show_label;\nexport let container = true;\nexport let scale = null;\nexport let min_width = void 0;\nexport let loading_status;\nexport let autoplay = false;\nexport let loop = false;\nexport let show_download_button;\nexport let show_share_button = false;\nexport let editable = true;\nexport let waveform_options = {};\nexport let pending;\nexport let streaming;\nexport let stream_every;\nexport let input_ready;\nexport let recording = false;\nlet uploading = false;\n$:\n  input_ready = !uploading;\nlet stream_state = \"closed\";\nlet _modify_stream;\nexport function modify_stream_state(state) {\n  stream_state = state;\n  _modify_stream(state);\n}\nexport const get_stream_state = () => stream_state;\nexport let set_time_limit;\nexport let gradio;\nlet old_value = null;\nlet active_source;\nlet initial_value = value;\n$:\n  if (value && initial_value === null) {\n    initial_value = value;\n  }\nconst handle_reset_value = () => {\n  if (initial_value === null || value === initial_value) {\n    return;\n  }\n  value = initial_value;\n};\n$: {\n  if (JSON.stringify(value) !== JSON.stringify(old_value)) {\n    old_value = value;\n    gradio.dispatch(\"change\");\n    if (!value_is_output) {\n      gradio.dispatch(\"input\");\n    }\n  }\n}\nlet dragging;\n$:\n  if (!active_source && sources) {\n    active_source = sources[0];\n  }\nlet waveform_settings;\nlet color_accent = \"darkorange\";\nonMount(() => {\n  color_accent = getComputedStyle(document?.documentElement).getPropertyValue(\n    \"--color-accent\"\n  );\n  set_trim_region_colour();\n  waveform_settings.waveColor = waveform_options.waveform_color || \"#9ca3af\";\n  waveform_settings.progressColor = waveform_options.waveform_progress_color || color_accent;\n  waveform_settings.mediaControls = waveform_options.show_controls;\n  waveform_settings.sampleRate = waveform_options.sample_rate || 44100;\n});\n$:\n  waveform_settings = {\n    height: 50,\n    barWidth: 2,\n    barGap: 3,\n    cursorWidth: 2,\n    cursorColor: \"#ddd5e9\",\n    autoplay,\n    barRadius: 10,\n    dragToSeek: true,\n    normalize: true,\n    minPxPerSec: 20\n  };\nconst trim_region_settings = {\n  color: waveform_options.trim_region_color,\n  drag: true,\n  resize: true\n};\nfunction set_trim_region_colour() {\n  document.documentElement.style.setProperty(\n    \"--trim-region-color\",\n    trim_region_settings.color || color_accent\n  );\n}\nfunction handle_error({ detail }) {\n  const [level, status] = detail.includes(\"Invalid file type\") ? [\"warning\", \"complete\"] : [\"error\", \"error\"];\n  loading_status = loading_status || {};\n  loading_status.status = status;\n  loading_status.message = detail;\n  gradio.dispatch(level, detail);\n}\nafterUpdate(() => {\n  value_is_output = false;\n});\n</script>\n\n{#if !interactive}\n\t<Block\n\t\tvariant={\"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\tallow_overflow={false}\n\t\t{elem_id}\n\t\t{elem_classes}\n\t\t{visible}\n\t\t{container}\n\t\t{scale}\n\t\t{min_width}\n\t>\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...loading_status}\n\t\t\ton:clear_status={() => gradio.dispatch(\"clear_status\", loading_status)}\n\t\t/>\n\n\t\t<StaticAudio\n\t\t\ti18n={gradio.i18n}\n\t\t\t{show_label}\n\t\t\t{show_download_button}\n\t\t\t{show_share_button}\n\t\t\t{value}\n\t\t\t{label}\n\t\t\t{loop}\n\t\t\t{waveform_settings}\n\t\t\t{waveform_options}\n\t\t\t{editable}\n\t\t\ton:share={(e) => gradio.dispatch(\"share\", e.detail)}\n\t\t\ton:error={(e) => gradio.dispatch(\"error\", e.detail)}\n\t\t\ton:play={() => gradio.dispatch(\"play\")}\n\t\t\ton:pause={() => gradio.dispatch(\"pause\")}\n\t\t\ton:stop={() => gradio.dispatch(\"stop\")}\n\t\t/>\n\t</Block>\n{:else}\n\t<Block\n\t\tvariant={value === null && active_source === \"upload\" ? \"dashed\" : \"solid\"}\n\t\tborder_mode={dragging ? \"focus\" : \"base\"}\n\t\tpadding={false}\n\t\tallow_overflow={false}\n\t\t{elem_id}\n\t\t{elem_classes}\n\t\t{visible}\n\t\t{container}\n\t\t{scale}\n\t\t{min_width}\n\t>\n\t\t<StatusTracker\n\t\t\tautoscroll={gradio.autoscroll}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{...loading_status}\n\t\t\ton:clear_status={() => gradio.dispatch(\"clear_status\", loading_status)}\n\t\t/>\n\t\t<InteractiveAudio\n\t\t\t{label}\n\t\t\t{show_label}\n\t\t\t{show_download_button}\n\t\t\t{value}\n\t\t\ton:change={({ detail }) => (value = detail)}\n\t\t\ton:stream={({ detail }) => {\n\t\t\t\tvalue = detail;\n\t\t\t\tgradio.dispatch(\"stream\", value);\n\t\t\t}}\n\t\t\ton:drag={({ detail }) => (dragging = detail)}\n\t\t\t{root}\n\t\t\t{sources}\n\t\t\t{active_source}\n\t\t\t{pending}\n\t\t\t{streaming}\n\t\t\tbind:recording\n\t\t\t{loop}\n\t\t\tmax_file_size={gradio.max_file_size}\n\t\t\t{handle_reset_value}\n\t\t\t{editable}\n\t\t\tbind:dragging\n\t\t\tbind:uploading\n\t\t\ton:edit={() => gradio.dispatch(\"edit\")}\n\t\t\ton:play={() => gradio.dispatch(\"play\")}\n\t\t\ton:pause={() => gradio.dispatch(\"pause\")}\n\t\t\ton:stop={() => gradio.dispatch(\"stop\")}\n\t\t\ton:start_recording={() => gradio.dispatch(\"start_recording\")}\n\t\t\ton:pause_recording={() => gradio.dispatch(\"pause_recording\")}\n\t\t\ton:stop_recording={(e) => gradio.dispatch(\"stop_recording\")}\n\t\t\ton:upload={() => gradio.dispatch(\"upload\")}\n\t\t\ton:clear={() => gradio.dispatch(\"clear\")}\n\t\t\ton:error={handle_error}\n\t\t\ton:close_stream={() => gradio.dispatch(\"close_stream\", \"stream\")}\n\t\t\ti18n={gradio.i18n}\n\t\t\t{waveform_settings}\n\t\t\t{waveform_options}\n\t\t\t{trim_region_settings}\n\t\t\t{stream_every}\n\t\t\tbind:modify_stream={_modify_stream}\n\t\t\tbind:set_time_limit\n\t\t\tupload={(...args) => gradio.client.upload(...args)}\n\t\t\tstream_handler={(...args) => gradio.client.stream(...args)}\n\t\t>\n\t\t\t<UploadText i18n={gradio.i18n} type=\"audio\" />\n\t\t</InteractiveAudio>\n\t</Block>\n{/if}\n"],"file":"assets/index-CJc6hWAf.js"}